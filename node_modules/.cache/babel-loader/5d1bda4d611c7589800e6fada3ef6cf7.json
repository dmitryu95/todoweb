{"ast":null,"code":"import { action, makeObservable, observable } from \"mobx\";\nimport { Network } from \"../components/Network\";\nimport { StoreTodo } from \"./NoteStore\";\n\nclass AuthStore {\n  constructor() {\n    this.email = \"\";\n    this.password = \"\";\n    this.response = \"\";\n    this.token = \"\";\n    this.id = \"\";\n    makeObservable(this, {\n      response: observable,\n      email: observable,\n      password: observable,\n      token: observable,\n      id: observable,\n      setEmail: action.bound,\n      setPassword: action.bound,\n      delEmail: action.bound,\n      delPassword: action.bound,\n      sendAuthDate: action.bound\n    });\n  }\n\n  setEmail(e) {\n    this.email = e.target.value;\n    console.log(\"email\", this.email);\n  }\n\n  setPassword(e) {\n    this.password = e.target.value;\n    console.log(\"password\", this.password);\n  }\n\n  delEmail() {\n    this.email = \"\";\n  }\n\n  delPassword() {\n    this.password = \"\";\n  }\n\n  delToken() {\n    this.token = \"\";\n  }\n\n  async sendAuthDate(url, method, status) {\n    if (this.email && this.password !== \"\") {\n      try {\n        const response = await Network(url, \" \", method, {\n          email: this.email,\n          password: this.password\n        });\n\n        if (response.id) {\n          if (status = \"registration\") {\n            this.response = await Network(\"Users/login\", \" \", \"POST\", {\n              email: this.email,\n              password: this.password\n            });\n            this.token = this.response.id;\n            this.id = this.response.userId;\n          } else {\n            this.response = response;\n            this.token = response.id;\n            this.id = response.userId;\n          }\n\n          StoreTodo.setListOfItems();\n          alert(\"Пользователь авторизован: \" + this.id);\n          this.delEmail();\n          this.delPassword();\n          return true;\n        } else {\n          alert(\"Ошибка, попробуте ввести повторно данные\");\n          return false;\n        }\n      } catch (err) {\n        console.log(err);\n        return false;\n      }\n    }\n\n    if (url == \"Users/logout?\") {\n      Network(url, \"access_token=\" + this.token, method);\n      this.delToken();\n    }\n\n    return false;\n  }\n\n}\n\nexport const store = new AuthStore();","map":{"version":3,"sources":["/Users/dmitriyu/Documents/todoweb/src/source/stores/AuthStore.js"],"names":["action","makeObservable","observable","Network","StoreTodo","AuthStore","constructor","email","password","response","token","id","setEmail","bound","setPassword","delEmail","delPassword","sendAuthDate","e","target","value","console","log","delToken","url","method","status","userId","setListOfItems","alert","err","store"],"mappings":"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","sourcesContent":["import { action, makeObservable, observable } from \"mobx\";\nimport { Network } from \"../components/Network\";\nimport { StoreTodo } from \"./NoteStore\";\n\nclass AuthStore {\n  constructor() {\n    this.email = \"\";\n    this.password = \"\";\n    this.response = \"\";\n    this.token = \"\";\n    this.id = \"\";\n    makeObservable(this, {\n      response: observable,\n      email: observable,\n      password: observable,\n      token: observable,\n      id: observable,\n      setEmail: action.bound,\n      setPassword: action.bound,\n      delEmail: action.bound,\n      delPassword: action.bound,\n      sendAuthDate: action.bound,\n    });\n  }\n\n  setEmail(e) {\n    this.email = e.target.value;\n    console.log(\"email\", this.email);\n  }\n\n  setPassword(e) {\n    this.password = e.target.value;\n    console.log(\"password\", this.password);\n  }\n\n  delEmail() {\n    this.email = \"\";\n  }\n\n  delPassword() {\n    this.password = \"\";\n  }\n\n  delToken() {\n    this.token = \"\";\n  }\n\n  async sendAuthDate(url, method, status) {\n    if (this.email && this.password !== \"\") {\n      try {\n        const response = await Network(url, \" \", method, {\n          email: this.email,\n          password: this.password,\n        });\n        if (response.id) {\n          \tif ((status = \"registration\")) {\n\t\t\t\tthis.response = await Network(\"Users/login\", \" \", \"POST\", {\n\t\t\t\temail: this.email,\n\t\t\t\tpassword: this.password,\n\t\t\t\t});\n\t\t\t\tthis.token = this.response.id;\n\t\t\t\tthis.id = this.response.userId;\n\t\t} else {\n\t\tthis.response = response;\n\t\tthis.token = response.id;\n\t\tthis.id = response.userId;\n\t\t}\n\t\tStoreTodo.setListOfItems();\n\t\talert(\"Пользователь авторизован: \" + this.id);\n\t\tthis.delEmail();\n\t\tthis.delPassword();\n\t\treturn true;\n        } else {\n          alert(\"Ошибка, попробуте ввести повторно данные\");\n          return false;\n        }\n      } catch (err) {\n        console.log(err);\n        return false;\n      }\n    }\n    if (url == \"Users/logout?\") {\n      Network(url, \"access_token=\" + this.token, method);\n      this.delToken();\n    }\n    return false;\n  }\n}\n\nexport const store = new AuthStore();\n"]},"metadata":{},"sourceType":"module"}